(function(t){t.fn.extend({beforeAfter:function(e){var i={animateIntro:!1,introDelay:1e3,introDuration:1e3,introPosition:.5,showFullLinks:!0,beforeLinkText:"Show only before",afterLinkText:"Show only after",imagePath:"./js/",cursor:"pointer",clickSpeed:600,linkDisplaySpeed:200,dividerColor:"#888",enableKeyboard:!1,keypressAmount:20,onReady:function(){}},e=t.extend(i,e),a=Math.round(1e8*Math.random());return this.each(function(){function i(){t("#lt-arrow"+a+", #rt-arrow"+a).stop().css("opacity",0),t("div:eq(2)",s).width(parseInt(t(this).css("left"))+4)}function r(){t(s).hover(function(){t("#lt-arrow"+a).stop().css({"z-index":"20",position:"absolute",top:n/2-t("#lt-arrow"+a).height()/2+"px",left:parseInt(t("#dragwrapper"+a).css("left"))-10+"px"}).animate({opacity:1,left:parseInt(t("#lt-arrow"+a).css("left"))-6+"px"},200),t("#rt-arrow"+a).stop().css({position:"absolute",top:n/2-t("#lt-arrow"+a).height()/2+"px",left:parseInt(t("#dragwrapper"+a).css("left"))+10+"px"}).animate({opacity:1,left:parseInt(t("#rt-arrow"+a).css("left"))+6+"px"},200),t("#dragwrapper"+a).animate({opacity:1},200)},function(){t("#lt-arrow"+a).animate({opacity:0,left:parseInt(t("#lt-arrow"+a).css("left"))-6+"px"},350),t("#rt-arrow"+a).animate({opacity:0,left:parseInt(t("#rt-arrow"+a).css("left"))+6+"px"},350),t("#dragwrapper"+a).animate({opacity:.25},350)}),t(s).click(function(e){var i=e.pageX-t(this).offset().left;t("#dragwrapper"+a).stop().animate({left:i-t("#dragwrapper"+a).width()/2+"px"},p.clickSpeed),t("div:eq(2)",s).stop().animate({width:i+"px"},p.clickSpeed),t("#lt-arrow"+a+",#rt-arrow"+a).stop().animate({opacity:0},50)}),t(s).one("mousemove",function(){t("#dragwrapper"+a).stop().animate({opacity:1},500)})}var p=e,s=t(this),o=t("img:first",s).width(),n=t("img:first",s).height();2!=t("div",s).length&&t("img",s).wrap("<div>"),t(s).width(o).height(n).css({overflow:"hidden",position:"relative",padding:"0"});t("img:first",s).attr("src"),t("img:last",s).attr("src");t("img:first",s).attr("id","beforeimage"+a),t("img:last",s).attr("id","afterimage"+a),t(s).prepend('<div id="dragwrapper'+a+'"><div id="drag'+a+'"><img width="8" height="56" alt="handle" src="'+p.imagePath+'handle.gif" id="handle'+a+'" /></div></div>'),t("#dragwrapper"+a).css({opacity:.25,position:"absolute",padding:"0",left:o*p.introPosition-t("#handle"+a).width()/2+"px","z-index":"20"}).width(t("#handle"+a).width()).height(n),t("div:eq(2)",s).height(n).width(o*p.introPosition).css({position:"absolute",overflow:"hidden",left:"0px","z-index":"10"}),t("div:eq(3)",s).height(n).width(o).css({position:"absolute",overflow:"hidden",right:"0px"}),t("#drag"+a).width(2).height(n).css({background:p.dividerColor,position:"absolute",left:"3px"}),t("#beforeimage"+a).css({position:"absolute",top:"0px",left:"0px"}),t("#afterimage"+a).css({position:"absolute",top:"0px",right:"0px"}),t("#handle"+a).css({"z-index":"100",position:"relative",cursor:p.cursor,top:n/2-t("#handle"+a).height()/2+"px",left:"-3px"}),t(s).append('<img src="'+p.imagePath+'lt-small.png" width="7" height="15" id="lt-arrow'+a+'"><img src="'+p.imagePath+'rt-small.png" width="7" height="15" id="rt-arrow'+a+'">'),p.showFullLinks&&(t(s).after('<div class="balinks" id="links'+a+'" style="position:relative"><span class="balinks"><a id="showleft'+a+'" href="javascript:void(0)">'+p.beforeLinkText+'</a></span><span class="balinks"><a id="showright'+a+'" href="javascript:void(0)">'+p.afterLinkText+"</a></span></div>"),t("#links"+a).width(o),t("#showleft"+a).css({position:"relative",left:"0px"}).click(function(){t("div:eq(2)",s).animate({width:o},p.linkDisplaySpeed),t("#dragwrapper"+a).animate({left:o-t("#dragwrapper"+a).width()+"px"},p.linkDisplaySpeed)}),t("#showright"+a).css({position:"absolute",right:"0px"}).click(function(){t("div:eq(2)",s).animate({width:0},p.linkDisplaySpeed),t("#dragwrapper"+a).animate({left:"0px"},p.linkDisplaySpeed)})),p.enableKeyboard&&t(document).keydown(function(e){39==e.keyCode&&(parseInt(t("#dragwrapper"+a).css("left"))+parseInt(t("#dragwrapper"+a).width())+p.keypressAmount<=o?(t("#dragwrapper"+a).css("left",parseInt(t("#dragwrapper"+a).css("left"))+p.keypressAmount+"px"),t("div:eq(2)",s).width(parseInt(t("div:eq(2)",s).width())+p.keypressAmount+"px")):(t("#dragwrapper"+a).css("left",o-parseInt(t("#dragwrapper"+a).width())+"px"),t("div:eq(2)",s).width(o-parseInt(t("#dragwrapper"+a).width())/2+"px"))),37==e.keyCode&&(parseInt(t("#dragwrapper"+a).css("left"))-p.keypressAmount>=0?(t("#dragwrapper"+a).css("left",parseInt(t("#dragwrapper"+a).css("left"))-p.keypressAmount+"px"),t("div:eq(2)",s).width(parseInt(t("div:eq(2)",s).width())-p.keypressAmount+"px")):(t("#dragwrapper"+a).css("left","0px"),t("div:eq(2)",s).width(t("#dragwrapper"+a).width()/2)))}),t("#dragwrapper"+a).draggable({containment:s,drag:i,stop:i}),p.animateIntro?(t("div:eq(2)",s).width(o),t("#dragwrapper"+a).css("left",o-t("#dragwrapper"+a).width()/2+"px"),setTimeout(function(){t("#dragwrapper"+a).css({opacity:1}).animate({left:o*p.introPosition-t("#dragwrapper"+a).width()/2+"px"},p.introDuration,function(){t("#dragwrapper"+a).animate({opacity:.25},1e3)}),t("div:eq(2)",s).width(o).animate({width:o*p.introPosition+"px"},p.introDuration,function(){r(),p.onReady.call(this)})},p.introDelay)):(r(),p.onReady.call(this))})}})})(jQuery);